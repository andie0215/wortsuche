<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wortsuche - Sopa de Letras en Alem√°n</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --coal: #1a1a1a;
            --fire: #d93025;
            --gold: #f4b400;
            --cream: #faf8f5;
            --ash: #5f6368;
            --sage: #34a853;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: var(--cream);
            color: var(--coal);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--coal) 33.33%, var(--fire) 33.33%, var(--fire) 66.66%, var(--gold) 66.66%);
            z-index: 1000;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header {
            text-align: center;
            margin: 40px 0 50px;
        }

        h1 {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 800;
            color: var(--coal);
            letter-spacing: -0.02em;
            margin-bottom: 10px;
            line-height: 1.1;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--ash);
            font-weight: 500;
        }

        .game-wrapper {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 1024px) {
            .game-wrapper {
                grid-template-columns: 1fr;
            }
        }

        .board-container {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: relative;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 6px;
            margin: 0 auto;
            max-width: 600px;
        }

        .cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Syne', sans-serif;
            font-size: clamp(1rem, 2vw, 1.4rem);
            font-weight: 700;
            background: var(--cream);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            user-select: none;
            color: var(--coal);
        }

        .cell:hover {
            background: #fff;
            border-color: var(--gold);
            transform: scale(1.05);
        }

        .cell.selected {
            background: var(--gold);
            color: var(--coal);
            transform: scale(1.08);
        }

        .cell.found {
            background: var(--sage);
            color: white;
            border-color: var(--sage);
            animation: popFound 0.4s ease-out;
        }

        @keyframes popFound {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .words-panel {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .words-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--coal);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .word-count {
            background: var(--gold);
            color: var(--coal);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .word-item {
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 10px;
            background: var(--cream);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .word-item:hover {
            background: #f0ede8;
            border-left-color: var(--fire);
        }

        .word-item.found {
            background: rgba(52, 168, 83, 0.1);
            border-left-color: var(--sage);
            text-decoration: line-through;
            opacity: 0.6;
        }

        .word-german {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--coal);
            margin-bottom: 2px;
        }

        .word-spanish {
            font-size: 0.9rem;
            color: var(--ash);
        }

        .info-panel {
            background: linear-gradient(135deg, var(--coal) 0%, #2d2d2d 100%);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            color: var(--cream);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .info-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--fire), var(--gold));
        }

        .info-placeholder {
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0.3;
        }

        .info-text {
            color: var(--ash);
            font-size: 0.95rem;
        }

        .word-info {
            animation: slideInInfo 0.4s ease-out;
        }

        @keyframes slideInInfo {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-word {
            font-family: 'Syne', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--gold);
        }

        .info-meaning {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: var(--cream);
        }

        .info-examples-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--gold);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .info-example {
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 3px solid var(--gold);
            text-align: left;
        }

        .example-de {
            font-style: italic;
            margin-bottom: 6px;
            color: var(--cream);
        }

        .example-es {
            font-size: 0.9rem;
            color: rgba(250, 248, 245, 0.7);
            margin-bottom: 4px;
        }

        .example-en {
            font-size: 0.9rem;
            color: rgba(250, 248, 245, 0.6);
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-family: 'Work Sans', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: var(--fire);
            color: white;
        }

        .btn-primary:hover {
            background: #c72419;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(217, 48, 37, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--coal);
            border: 2px solid var(--coal);
        }

        .btn-secondary:hover {
            background: var(--coal);
            color: white;
            transform: translateY(-2px);
        }

        .victory-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .victory-modal.show {
            display: flex;
        }

        .victory-content {
            background: white;
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            max-width: 500px;
            animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .victory-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--coal), var(--fire), var(--gold));
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .victory-emoji {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .victory-title {
            font-family: 'Syne', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--coal);
            margin-bottom: 15px;
        }

        .victory-message {
            font-size: 1.2rem;
            color: var(--ash);
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--cream);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--sage), var(--gold));
            transition: width 0.5s ease;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Wortsuche</h1>
            <p class="subtitle">Encuentra las palabras en alem√°n y aprende su significado</p>
        </header>

        <div class="game-wrapper">
            <div class="board-container">
                <div class="board" id="board"></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>

            <div class="sidebar">
                <div class="words-panel">
                    <h2 class="words-title">
                        Palabras
                        <span class="word-count" id="wordCount">0/0</span>
                    </h2>
                    <div id="wordsList"></div>
                </div>

                <div class="info-panel" id="infoPanel">
                    <div class="info-placeholder">üîç</div>
                    <p class="info-text">Encuentra una palabra para ver su significado y ejemplos</p>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="newGame()">üé≤ Nueva Partida</button>
            <button class="btn btn-secondary" onclick="clearSelection()">‚ú® Limpiar Selecci√≥n</button>
        </div>
    </div>

    <div class="victory-modal" id="victoryModal">
        <div class="victory-content">
            <div class="victory-emoji">üéâ</div>
            <h2 class="victory-title">¬°Ausgezeichnet!</h2>
            <p class="victory-message">¬°Has encontrado todas las palabras!</p>
            <button class="btn btn-primary" onclick="closeVictory()">Cerrar</button>
        </div>
    </div>

    <script>
        const WORDS_DATABASE = [
            // Animales
            {
                word: "HUND",
                meaning: "Perro / Dog",
                examples: [
                    { de: "Der Hund bellt laut.", es: "El perro ladra fuerte.", en: "The dog barks loudly." },
                    { de: "Mein Hund hei√üt Max.", es: "Mi perro se llama Max.", en: "My dog is called Max." }
                ]
            },
            {
                word: "KATZE",
                meaning: "Gato / Cat",
                examples: [
                    { de: "Meine Katze schl√§ft auf dem Sofa.", es: "Mi gato duerme en el sof√°.", en: "My cat sleeps on the sofa." },
                    { de: "Die Katze jagt eine Maus.", es: "El gato caza un rat√≥n.", en: "The cat hunts a mouse." }
                ]
            },
            {
                word: "VOGEL",
                meaning: "P√°jaro / Bird",
                examples: [
                    { de: "Der Vogel singt sch√∂n.", es: "El p√°jaro canta bonito.", en: "The bird sings beautifully." },
                    { de: "Ein bunter Vogel sitzt im Baum.", es: "Un p√°jaro colorido est√° en el √°rbol.", en: "A colorful bird sits in the tree." }
                ]
            },
            {
                word: "FISCH",
                meaning: "Pez / Fish",
                examples: [
                    { de: "Der Fisch schwimmt im Meer.", es: "El pez nada en el mar.", en: "The fish swims in the sea." },
                    { de: "Ich esse gern Fisch.", es: "Me gusta comer pescado.", en: "I like to eat fish." }
                ]
            },
            {
                word: "PFERD",
                meaning: "Caballo / Horse",
                examples: [
                    { de: "Das Pferd galoppiert √ºber die Wiese.", es: "El caballo galopa por el prado.", en: "The horse gallops across the meadow." },
                    { de: "Sie reitet auf einem braunen Pferd.", es: "Ella monta un caballo marr√≥n.", en: "She rides a brown horse." }
                ]
            },
            {
                word: "MAUS",
                meaning: "Rat√≥n / Mouse",
                examples: [
                    { de: "Die Maus ist sehr klein.", es: "El rat√≥n es muy peque√±o.", en: "The mouse is very small." },
                    { de: "Eine Maus l√§uft durch das Haus.", es: "Un rat√≥n corre por la casa.", en: "A mouse runs through the house." }
                ]
            },
            {
                word: "SCHAF",
                meaning: "Oveja / Sheep",
                examples: [
                    { de: "Das Schaf hat wei√üe Wolle.", es: "La oveja tiene lana blanca.", en: "The sheep has white wool." },
                    { de: "Die Schafe grasen auf der Weide.", es: "Las ovejas pastan en el prado.", en: "The sheep graze in the pasture." }
                ]
            },
            {
                word: "SCHWEIN",
                meaning: "Cerdo / Pig",
                examples: [
                    { de: "Das Schwein lebt auf dem Bauernhof.", es: "El cerdo vive en la granja.", en: "The pig lives on the farm." },
                    { de: "Schweine sind intelligente Tiere.", es: "Los cerdos son animales inteligentes.", en: "Pigs are intelligent animals." }
                ]
            },
            // Naturaleza
            {
                word: "BAUM",
                meaning: "√Årbol / Tree",
                examples: [
                    { de: "Der Baum ist sehr alt.", es: "El √°rbol es muy viejo.", en: "The tree is very old." },
                    { de: "Im Fr√ºhling bl√ºht der Baum.", es: "En primavera el √°rbol florece.", en: "In spring the tree blooms." }
                ]
            },
            {
                word: "BLUME",
                meaning: "Flor / Flower",
                examples: [
                    { de: "Die Blume duftet sch√∂n.", es: "La flor huele bien.", en: "The flower smells nice." },
                    { de: "Ich schenke dir eine rote Blume.", es: "Te regalo una flor roja.", en: "I give you a red flower." }
                ]
            },
            {
                word: "WALD",
                meaning: "Bosque / Forest",
                examples: [
                    { de: "Wir spazieren durch den Wald.", es: "Paseamos por el bosque.", en: "We walk through the forest." },
                    { de: "Der Wald ist gr√ºn und dicht.", es: "El bosque es verde y denso.", en: "The forest is green and dense." }
                ]
            },
            {
                word: "BERG",
                meaning: "Monta√±a / Mountain",
                examples: [
                    { de: "Der Berg ist sehr hoch.", es: "La monta√±a es muy alta.", en: "The mountain is very high." },
                    { de: "Wir wandern auf den Berg.", es: "Caminamos hacia la monta√±a.", en: "We hike up the mountain." }
                ]
            },
            {
                word: "MEER",
                meaning: "Mar / Sea",
                examples: [
                    { de: "Das Meer ist blau und tief.", es: "El mar es azul y profundo.", en: "The sea is blue and deep." },
                    { de: "Ich schwimme gern im Meer.", es: "Me gusta nadar en el mar.", en: "I like to swim in the sea." }
                ]
            },
            {
                word: "FLUSS",
                meaning: "R√≠o / River",
                examples: [
                    { de: "Der Fluss flie√üt ins Meer.", es: "El r√≠o fluye hacia el mar.", en: "The river flows into the sea." },
                    { de: "Wir angeln am Fluss.", es: "Pescamos en el r√≠o.", en: "We fish at the river." }
                ]
            },
            {
                word: "SONNE",
                meaning: "Sol / Sun",
                examples: [
                    { de: "Die Sonne scheint heute.", es: "El sol brilla hoy.", en: "The sun shines today." },
                    { de: "Die Sonne geht unter.", es: "El sol se pone.", en: "The sun sets." }
                ]
            },
            {
                word: "MOND",
                meaning: "Luna / Moon",
                examples: [
                    { de: "Der Mond leuchtet nachts.", es: "La luna brilla de noche.", en: "The moon shines at night." },
                    { de: "Heute ist Vollmond.", es: "Hoy es luna llena.", en: "Today is full moon." }
                ]
            },
            {
                word: "STERN",
                meaning: "Estrella / Star",
                examples: [
                    { de: "Die Sterne funkeln am Himmel.", es: "Las estrellas brillan en el cielo.", en: "The stars sparkle in the sky." },
                    { de: "Ich sehe einen hellen Stern.", es: "Veo una estrella brillante.", en: "I see a bright star." }
                ]
            },
            {
                word: "REGEN",
                meaning: "Lluvia / Rain",
                examples: [
                    { de: "Der Regen f√§llt stark.", es: "La lluvia cae fuerte.", en: "The rain falls heavily." },
                    { de: "Ich mag den Regen.", es: "Me gusta la lluvia.", en: "I like the rain." }
                ]
            },
            {
                word: "SCHNEE",
                meaning: "Nieve / Snow",
                examples: [
                    { de: "Der Schnee ist wei√ü und kalt.", es: "La nieve es blanca y fr√≠a.", en: "The snow is white and cold." },
                    { de: "Im Winter f√§llt viel Schnee.", es: "En invierno cae mucha nieve.", en: "In winter a lot of snow falls." }
                ]
            },
            // Casa y objetos
            {
                word: "HAUS",
                meaning: "Casa / House",
                examples: [
                    { de: "Ich wohne in einem gro√üen Haus.", es: "Vivo en una casa grande.", en: "I live in a big house." },
                    { de: "Das Haus hat einen sch√∂nen Garten.", es: "La casa tiene un jard√≠n bonito.", en: "The house has a beautiful garden." }
                ]
            },
            {
                word: "TISCH",
                meaning: "Mesa / Table",
                examples: [
                    { de: "Der Tisch ist aus Holz.", es: "La mesa es de madera.", en: "The table is made of wood." },
                    { de: "Auf dem Tisch steht eine Vase.", es: "Sobre la mesa hay un jarr√≥n.", en: "There is a vase on the table." }
                ]
            },
            {
                word: "STUHL",
                meaning: "Silla / Chair",
                examples: [
                    { de: "Der Stuhl ist bequem.", es: "La silla es c√≥moda.", en: "The chair is comfortable." },
                    { de: "Ich sitze auf einem Stuhl.", es: "Estoy sentado en una silla.", en: "I sit on a chair." }
                ]
            },
            {
                word: "BETT",
                meaning: "Cama / Bed",
                examples: [
                    { de: "Das Bett ist weich.", es: "La cama es suave.", en: "The bed is soft." },
                    { de: "Ich schlafe im Bett.", es: "Duermo en la cama.", en: "I sleep in the bed." }
                ]
            },
            {
                word: "FENSTER",
                meaning: "Ventana / Window",
                examples: [
                    { de: "Das Fenster ist offen.", es: "La ventana est√° abierta.", en: "The window is open." },
                    { de: "Ich schaue aus dem Fenster.", es: "Miro por la ventana.", en: "I look out the window." }
                ]
            },
            {
                word: "TUER",
                meaning: "Puerta / Door",
                examples: [
                    { de: "Die T√ºr ist geschlossen.", es: "La puerta est√° cerrada.", en: "The door is closed." },
                    { de: "Bitte √∂ffne die T√ºr.", es: "Por favor abre la puerta.", en: "Please open the door." }
                ]
            },
            {
                word: "LAMPE",
                meaning: "L√°mpara / Lamp",
                examples: [
                    { de: "Die Lampe gibt helles Licht.", es: "La l√°mpara da luz brillante.", en: "The lamp gives bright light." },
                    { de: "Ich schalte die Lampe ein.", es: "Enciendo la l√°mpara.", en: "I turn on the lamp." }
                ]
            },
            {
                word: "UFER",
                meaning: "Orilla / Shore",
                examples: [
                    { de: "Wir sitzen am Ufer des Sees.", es: "Nos sentamos en la orilla del lago.", en: "We sit on the shore of the lake." },
                    { de: "Das Boot liegt am Ufer.", es: "El bote est√° en la orilla.", en: "The boat is at the shore." }
                ]
            },
            // Comida y bebida
            {
                word: "BROT",
                meaning: "Pan / Bread",
                examples: [
                    { de: "Das Brot ist frisch.", es: "El pan est√° fresco.", en: "The bread is fresh." },
                    { de: "Ich esse Brot zum Fr√ºhst√ºck.", es: "Como pan en el desayuno.", en: "I eat bread for breakfast." }
                ]
            },
            {
                word: "WASSER",
                meaning: "Agua / Water",
                examples: [
                    { de: "Ich trinke viel Wasser.", es: "Bebo mucha agua.", en: "I drink a lot of water." },
                    { de: "Das Wasser ist kalt.", es: "El agua est√° fr√≠a.", en: "The water is cold." }
                ]
            },
            {
                word: "MILCH",
                meaning: "Leche / Milk",
                examples: [
                    { de: "Die Milch ist frisch.", es: "La leche est√° fresca.", en: "The milk is fresh." },
                    { de: "Ich trinke Milch zum Fr√ºhst√ºck.", es: "Bebo leche en el desayuno.", en: "I drink milk for breakfast." }
                ]
            },
            {
                word: "APFEL",
                meaning: "Manzana / Apple",
                examples: [
                    { de: "Der Apfel ist rot und s√º√ü.", es: "La manzana es roja y dulce.", en: "The apple is red and sweet." },
                    { de: "Ich esse jeden Tag einen Apfel.", es: "Como una manzana cada d√≠a.", en: "I eat an apple every day." }
                ]
            },
            {
                word: "KUCHEN",
                meaning: "Pastel / Cake",
                examples: [
                    { de: "Der Kuchen schmeckt lecker.", es: "El pastel sabe delicioso.", en: "The cake tastes delicious." },
                    { de: "Ich backe einen Kuchen.", es: "Horneo un pastel.", en: "I bake a cake." }
                ]
            },
            {
                word: "KAFFE",
                meaning: "Caf√© / Coffee",
                examples: [
                    { de: "Ich trinke morgens Kaffee.", es: "Tomo caf√© por la ma√±ana.", en: "I drink coffee in the morning." },
                    { de: "Der Kaffee ist hei√ü.", es: "El caf√© est√° caliente.", en: "The coffee is hot." }
                ]
            },
            {
                word: "SUPPE",
                meaning: "Sopa / Soup",
                examples: [
                    { de: "Die Suppe ist warm und lecker.", es: "La sopa est√° caliente y deliciosa.", en: "The soup is warm and delicious." },
                    { de: "Ich koche eine Gem√ºsesuppe.", es: "Cocino una sopa de verduras.", en: "I cook a vegetable soup." }
                ]
            },
            // Objetos y cosas
            {
                word: "BUCH",
                meaning: "Libro / Book",
                examples: [
                    { de: "Ich lese ein interessantes Buch.", es: "Leo un libro interesante.", en: "I read an interesting book." },
                    { de: "Das Buch liegt auf dem Tisch.", es: "El libro est√° sobre la mesa.", en: "The book is on the table." }
                ]
            },
            {
                word: "STIFT",
                meaning: "Bol√≠grafo / Pen",
                examples: [
                    { de: "Ich schreibe mit einem blauen Stift.", es: "Escribo con un bol√≠grafo azul.", en: "I write with a blue pen." },
                    { de: "Der Stift liegt im Etui.", es: "El bol√≠grafo est√° en el estuche.", en: "The pen is in the case." }
                ]
            },
            {
                word: "TASCHE",
                meaning: "Bolso / Bag",
                examples: [
                    { de: "Meine Tasche ist schwer.", es: "Mi bolso es pesado.", en: "My bag is heavy." },
                    { de: "Die Tasche ist aus Leder.", es: "El bolso es de cuero.", en: "The bag is made of leather." }
                ]
            },
            {
                word: "SCHLOSS",
                meaning: "Castillo / Castle",
                examples: [
                    { de: "Das Schloss ist sehr alt.", es: "El castillo es muy antiguo.", en: "The castle is very old." },
                    { de: "Wir besuchen ein sch√∂nes Schloss.", es: "Visitamos un castillo hermoso.", en: "We visit a beautiful castle." }
                ]
            },
            {
                word: "BRIEF",
                meaning: "Carta / Letter",
                examples: [
                    { de: "Ich schreibe einen Brief.", es: "Escribo una carta.", en: "I write a letter." },
                    { de: "Der Brief kommt morgen an.", es: "La carta llega ma√±ana.", en: "The letter arrives tomorrow." }
                ]
            },
            {
                word: "GELD",
                meaning: "Dinero / Money",
                examples: [
                    { de: "Ich brauche mehr Geld.", es: "Necesito m√°s dinero.", en: "I need more money." },
                    { de: "Das Geld liegt in der Brieftasche.", es: "El dinero est√° en la billetera.", en: "The money is in the wallet." }
                ]
            },
            {
                word: "SCHLUESSEL",
                meaning: "Llave / Key",
                examples: [
                    { de: "Wo ist mein Schl√ºssel?", es: "¬øD√≥nde est√° mi llave?", en: "Where is my key?" },
                    { de: "Der Schl√ºssel passt ins Schloss.", es: "La llave encaja en la cerradura.", en: "The key fits in the lock." }
                ]
            },
            // Familia y personas
            {
                word: "MUTTER",
                meaning: "Madre / Mother",
                examples: [
                    { de: "Meine Mutter kocht sehr gut.", es: "Mi madre cocina muy bien.", en: "My mother cooks very well." },
                    { de: "Die Mutter liebt ihre Kinder.", es: "La madre ama a sus hijos.", en: "The mother loves her children." }
                ]
            },
            {
                word: "VATER",
                meaning: "Padre / Father",
                examples: [
                    { de: "Mein Vater arbeitet viel.", es: "Mi padre trabaja mucho.", en: "My father works a lot." },
                    { de: "Der Vater spielt mit den Kindern.", es: "El padre juega con los ni√±os.", en: "The father plays with the children." }
                ]
            },
            {
                word: "KIND",
                meaning: "Ni√±o / Child",
                examples: [
                    { de: "Das Kind spielt im Garten.", es: "El ni√±o juega en el jard√≠n.", en: "The child plays in the garden." },
                    { de: "Kinder lernen schnell.", es: "Los ni√±os aprenden r√°pido.", en: "Children learn quickly." }
                ]
            },
            {
                word: "FREUND",
                meaning: "Amigo / Friend",
                examples: [
                    { de: "Er ist mein bester Freund.", es: "√âl es mi mejor amigo.", en: "He is my best friend." },
                    { de: "Ich treffe meinen Freund heute.", es: "Veo a mi amigo hoy.", en: "I meet my friend today." }
                ]
            },
            {
                word: "LEHRER",
                meaning: "Profesor / Teacher",
                examples: [
                    { de: "Der Lehrer erkl√§rt die Aufgabe.", es: "El profesor explica la tarea.", en: "The teacher explains the task." },
                    { de: "Mein Lehrer ist sehr nett.", es: "Mi profesor es muy amable.", en: "My teacher is very kind." }
                ]
            },
            // Colores y conceptos
            {
                word: "FARBE",
                meaning: "Color / Color",
                examples: [
                    { de: "Welche Farbe magst du?", es: "¬øQu√© color te gusta?", en: "What color do you like?" },
                    { de: "Die Farbe ist sehr sch√∂n.", es: "El color es muy bonito.", en: "The color is very beautiful." }
                ]
            },
            {
                word: "ZEIT",
                meaning: "Tiempo / Time",
                examples: [
                    { de: "Ich habe keine Zeit.", es: "No tengo tiempo.", en: "I have no time." },
                    { de: "Die Zeit vergeht schnell.", es: "El tiempo pasa r√°pido.", en: "Time passes quickly." }
                ]
            },
            {
                word: "ARBEIT",
                meaning: "Trabajo / Work",
                examples: [
                    { de: "Die Arbeit macht mir Spa√ü.", es: "El trabajo me divierte.", en: "Work is fun for me." },
                    { de: "Ich gehe zur Arbeit.", es: "Voy al trabajo.", en: "I go to work." }
                ]
            },
            {
                word: "SCHULE",
                meaning: "Escuela / School",
                examples: [
                    { de: "Die Kinder gehen zur Schule.", es: "Los ni√±os van a la escuela.", en: "The children go to school." },
                    { de: "Die Schule beginnt um acht Uhr.", es: "La escuela empieza a las ocho.", en: "School starts at eight o'clock." }
                ]
            },
            {
                word: "STADT",
                meaning: "Ciudad / City",
                examples: [
                    { de: "Ich wohne in einer gro√üen Stadt.", es: "Vivo en una ciudad grande.", en: "I live in a big city." },
                    { de: "Die Stadt ist sehr sch√∂n.", es: "La ciudad es muy bonita.", en: "The city is very beautiful." }
                ]
            },
            {
                word: "LAND",
                meaning: "Pa√≠s / Country",
                examples: [
                    { de: "Deutschland ist ein sch√∂nes Land.", es: "Alemania es un pa√≠s hermoso.", en: "Germany is a beautiful country." },
                    { de: "Welches Land besuchst du?", es: "¬øQu√© pa√≠s visitas?", en: "Which country are you visiting?" }
                ]
            },
            {
                word: "WELT",
                meaning: "Mundo / World",
                examples: [
                    { de: "Die Welt ist gro√ü.", es: "El mundo es grande.", en: "The world is big." },
                    { de: "Ich reise um die Welt.", es: "Viajo alrededor del mundo.", en: "I travel around the world." }
                ]
            },
            {
                word: "LIEBE",
                meaning: "Amor / Love",
                examples: [
                    { de: "Liebe ist wichtig.", es: "El amor es importante.", en: "Love is important." },
                    { de: "Ich glaube an die Liebe.", es: "Creo en el amor.", en: "I believe in love." }
                ]
            },
            {
                word: "MUSIK",
                meaning: "M√∫sica / Music",
                examples: [
                    { de: "Ich h√∂re gerne Musik.", es: "Me gusta escuchar m√∫sica.", en: "I like to listen to music." },
                    { de: "Die Musik ist laut.", es: "La m√∫sica est√° alta.", en: "The music is loud." }
                ]
            },
            {
                word: "SPORT",
                meaning: "Deporte / Sport",
                examples: [
                    { de: "Ich treibe viel Sport.", es: "Hago mucho deporte.", en: "I do a lot of sports." },
                    { de: "Sport ist gesund.", es: "El deporte es saludable.", en: "Sport is healthy." }
                ]
            }
        ];

        const GRID_SIZE = 12;
        let grid = [];
        let selectedCells = [];
        let foundWords = new Set();
        let currentWords = [];
        let previousWords = [];

        function initGame() {
            // Seleccionar 6 palabras aleatorias que no sean las mismas que la partida anterior
            let availableWords = [...WORDS_DATABASE];
            
            // Si hay palabras anteriores, excluirlas de las disponibles
            if (previousWords.length > 0) {
                availableWords = availableWords.filter(w => 
                    !previousWords.some(pw => pw.word === w.word)
                );
            }
            
            // Si quedan menos de 6 palabras disponibles, resetear y permitir todas
            if (availableWords.length < 6) {
                availableWords = [...WORDS_DATABASE];
                previousWords = [];
            }
            
            // Seleccionar 6 palabras aleatorias
            currentWords = availableWords.sort(() => Math.random() - 0.5).slice(0, 6);
            
            grid = createEmptyGrid();
            placeWords();
            fillEmptySpaces();
            renderBoard();
            renderWordsList();
            updateProgress();
            clearInfoPanel();
        }

        function createEmptyGrid() {
            return Array(GRID_SIZE).fill(null).map(() => Array(GRID_SIZE).fill(''));
        }

        function placeWords() {
            const directions = [
                { dx: 0, dy: 1 },   // horizontal
                { dx: 1, dy: 0 },   // vertical
                { dx: 1, dy: 1 },   // diagonal down-right
                { dx: 1, dy: -1 }   // diagonal down-left
            ];

            currentWords.forEach(wordObj => {
                let placed = false;
                let attempts = 0;
                const maxAttempts = 100;

                while (!placed && attempts < maxAttempts) {
                    const dir = directions[Math.floor(Math.random() * directions.length)];
                    const startX = Math.floor(Math.random() * GRID_SIZE);
                    const startY = Math.floor(Math.random() * GRID_SIZE);

                    if (canPlaceWord(wordObj.word, startX, startY, dir.dx, dir.dy)) {
                        placeWord(wordObj.word, startX, startY, dir.dx, dir.dy);
                        placed = true;
                    }
                    attempts++;
                }
            });
        }

        function canPlaceWord(word, x, y, dx, dy) {
            if (x + dx * (word.length - 1) >= GRID_SIZE || x + dx * (word.length - 1) < 0) return false;
            if (y + dy * (word.length - 1) >= GRID_SIZE || y + dy * (word.length - 1) < 0) return false;

            for (let i = 0; i < word.length; i++) {
                const newX = x + dx * i;
                const newY = y + dy * i;
                if (grid[newY][newX] !== '' && grid[newY][newX] !== word[i]) {
                    return false;
                }
            }
            return true;
        }

        function placeWord(word, x, y, dx, dy) {
            for (let i = 0; i < word.length; i++) {
                grid[y + dy * i][x + dx * i] = word[i];
            }
        }

        function fillEmptySpaces() {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            for (let i = 0; i < GRID_SIZE; i++) {
                for (let j = 0; j < GRID_SIZE; j++) {
                    if (grid[i][j] === '') {
                        grid[i][j] = letters[Math.floor(Math.random() * letters.length)];
                    }
                }
            }
        }

        function renderBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            for (let i = 0; i < GRID_SIZE; i++) {
                for (let j = 0; j < GRID_SIZE; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = grid[i][j];
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.addEventListener('click', () => selectCell(i, j, cell));
                    board.appendChild(cell);
                }
            }
        }

        function selectCell(row, col, element) {
            const index = selectedCells.findIndex(c => c.row === row && c.col === col);
            
            if (index > -1) {
                selectedCells.splice(index, 1);
                element.classList.remove('selected');
            } else {
                selectedCells.push({ row, col, element });
                element.classList.add('selected');
            }

            checkWord();
        }

        function checkWord() {
            if (selectedCells.length < 2) return;

            const selectedWord = selectedCells.map(c => grid[c.row][c.col]).join('');
            const reversedWord = selectedWord.split('').reverse().join('');

            const found = currentWords.find(w => 
                (w.word === selectedWord || w.word === reversedWord) && !foundWords.has(w.word)
            );

            if (found) {
                foundWords.add(found.word);
                selectedCells.forEach(c => {
                    c.element.classList.remove('selected');
                    c.element.classList.add('found');
                });
                selectedCells = [];
                showWordInfo(found);
                updateProgress();
                
                if (foundWords.size === currentWords.length) {
                    setTimeout(() => showVictory(), 800);
                }
            }
        }

        function showWordInfo(wordObj) {
            const panel = document.getElementById('infoPanel');
            
            const examplesHTML = wordObj.examples.map(ex => `
                <div class="info-example">
                    <div class="example-de">"${ex.de}"</div>
                    <div class="example-es">üá™üá∏ ${ex.es}</div>
                    <div class="example-en">üá¨üáß ${ex.en}</div>
                </div>
            `).join('');

            panel.innerHTML = `
                <div class="word-info">
                    <div class="info-word">${wordObj.word}</div>
                    <div class="info-meaning">${wordObj.meaning}</div>
                    <div class="info-examples-title">Ejemplos</div>
                    ${examplesHTML}
                </div>
            `;
        }

        function clearInfoPanel() {
            const panel = document.getElementById('infoPanel');
            panel.innerHTML = `
                <div class="info-placeholder">üîç</div>
                <p class="info-text">Encuentra una palabra para ver su significado y ejemplos</p>
            `;
        }

        function renderWordsList() {
            const list = document.getElementById('wordsList');
            list.innerHTML = currentWords.map(w => `
                <div class="word-item ${foundWords.has(w.word) ? 'found' : ''}" data-word="${w.word}">
                    <div class="word-german">${w.word}</div>
                    <div class="word-spanish">${w.meaning}</div>
                </div>
            `).join('');
        }

        function updateProgress() {
            const count = document.getElementById('wordCount');
            const progress = document.getElementById('progressBar');
            
            count.textContent = `${foundWords.size}/${currentWords.length}`;
            progress.style.width = `${(foundWords.size / currentWords.length) * 100}%`;
            
            renderWordsList();
        }

        function clearSelection() {
            selectedCells.forEach(c => c.element.classList.remove('selected'));
            selectedCells = [];
        }

        function newGame() {
            // Guardar las palabras actuales ANTES de limpiar
            if (currentWords.length > 0) {
                previousWords = [...currentWords];
            }
            foundWords.clear();
            selectedCells = [];
            initGame();
        }

        function showVictory() {
            document.getElementById('victoryModal').classList.add('show');
        }

        function closeVictory() {
            document.getElementById('victoryModal').classList.remove('show');
            newGame();
        }

        // Initialize game on load
        initGame();
    </script>
</body>
</html>
